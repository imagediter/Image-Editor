<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PDF to Text Converter | Multi Tool</title>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Segoe UI", sans-serif;
}

body {
    background: linear-gradient(135deg, #e6f4ff, #f5fbff);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.container {
    background: #fff;
    max-width: 900px;
    width: 100%;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

h1 {
    text-align: center;
    color: #0077ff;
    margin-bottom: 10px;
}

p {
    text-align: center;
    color: #555;
    margin-bottom: 20px;
}

.upload-box {
    border: 2px dashed #0077ff;
    padding: 30px;
    text-align: center;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.3s;
}

.upload-box:hover {
    background: #f0f8ff;
}

.upload-box input {
    display: none;
}

.upload-box span {
    font-size: 16px;
    color: #0077ff;
    font-weight: 600;
}

.buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 15px;
}

button {
    padding: 10px 18px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: 0.3s;
}

.extract {
    background: #0077ff;
    color: #fff;
}

.extract:hover {
    background: #005edc;
}

.copy {
    background: #28a745;
    color: #fff;
}

.download {
    background: #ff9800;
    color: #fff;
}

.reset {
    background: #dc3545;
    color: #fff;
}

textarea {
    width: 100%;
    height: 300px;
    margin-top: 20px;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #ddd;
    resize: vertical;
    font-size: 14px;
    line-height: 1.5;
}

@media (max-width: 600px) {
    textarea {
        height: 220px;
    }
}
</style>
</head>

<body>

<div class="container">
    <h1>PDF to Text Converter</h1>
    <p>Upload a PDF file and extract editable text instantly</p>

    <label class="upload-box" id="dropArea">
        <input type="file" id="pdfInput" accept="application/pdf">
        <span>Click or Drag & Drop PDF Here</span>
    </label>

    <div class="buttons">
        <button class="extract" onclick="extractText()">Extract Text</button>
        <button class="copy" onclick="copyText()">Copy Text</button>
        <button class="download" onclick="downloadText()">Download TXT</button>
        <button class="reset" onclick="resetTool()">Reset</button>
    </div>

    <textarea id="output" placeholder="Extracted text will appear here..."></textarea>
</div>

<script>
let pdfFile = null;

const pdfInput = document.getElementById("pdfInput");
const dropArea = document.getElementById("dropArea");
const output = document.getElementById("output");

pdfInput.addEventListener("change", e => {
    pdfFile = e.target.files[0];
});

// Drag & Drop
dropArea.addEventListener("dragover", e => {
    e.preventDefault();
    dropArea.style.background = "#f0f8ff";
});

dropArea.addEventListener("dragleave", () => {
    dropArea.style.background = "";
});

dropArea.addEventListener("drop", e => {
    e.preventDefault();
    dropArea.style.background = "";
    pdfFile = e.dataTransfer.files[0];
});

async function extractText() {
    if (!pdfFile) {
        alert("Please upload a PDF file first.");
        return;
    }

    output.value = "Extracting text, please wait...";

    const fileReader = new FileReader();
    fileReader.readAsArrayBuffer(pdfFile);

    fileReader.onload = async function () {
        const typedarray = new Uint8Array(this.result);
        const pdf = await pdfjsLib.getDocument(typedarray).promise;

        let textContent = "";

        for (let i = 1; i <= pdf.numPages; i++) {
            const page = await pdf.getPage(i);
            const content = await page.getTextContent();
            const strings = content.items.map(item => item.str);
            textContent += strings.join(" ") + "\n\n";
        }

        output.value = textContent.trim();
    };
}

function copyText() {
    if (!output.value) return;
    navigator.clipboard.writeText(output.value);
    alert("Text copied to clipboard!");
}

function downloadText() {
    if (!output.value) return;

    const blob = new Blob([output.value], { type: "text/plain" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "pdf-to-text.txt";
    link.click();
}

function resetTool() {
    pdfInput.value = "";
    pdfFile = null;
    output.value = "";
}
</script>

</body>
</html>
