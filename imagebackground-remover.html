<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Background Remover | Multi Tool Hub</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
:root{
--primary:#007bff;
--secondary:#0056b3;
--bg:#f4f7f6;
--white:#fff;
--text:#333;
--muted:#777;
--border:#e0e0e0;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}
body{background:var(--bg);color:var(--text)}
nav{
background:#fff;
padding:15px 6%;
display:flex;
justify-content:space-between;
align-items:center;
box-shadow:0 2px 10px rgba(0,0,0,.05)
}
.logo{font-weight:700;font-size:1.4rem;color:var(--primary)}

.main{
max-width:1200px;
margin:40px auto;
padding:0 20px
}
.layout{
display:grid;
grid-template-columns:1fr 320px;
gap:30px
}
@media(max-width:992px){.layout{grid-template-columns:1fr}}

.card{
background:#fff;
border-radius:14px;
padding:30px;
box-shadow:0 6px 25px rgba(0,0,0,.08);
position:relative
}
.drop{
border:2px dashed var(--primary);
border-radius:12px;
padding:60px 20px;
text-align:center;
cursor:pointer;
transition:.3s
}
.drop:hover,.drop.drag{background:rgba(0,123,255,.05)}

.preview{
display:none;
grid-template-columns:1fr 1fr;
gap:20px;
margin-top:20px
}
@media(max-width:600px){.preview{grid-template-columns:1fr}}

.preview img,canvas{
width:100%;
border-radius:10px;
border:1px solid var(--border);
background:
linear-gradient(45deg,#eee 25%,transparent 25%),
linear-gradient(-45deg,#eee 25%,transparent 25%),
linear-gradient(45deg,transparent 75%,#eee 75%),
linear-gradient(-45deg,transparent 75%,#eee 75%);
background-size:20px 20px;
background-position:0 0,0 10px,10px -10px,-10px 0
}

.sidebar{display:flex;flex-direction:column;gap:20px}
.box{
background:#fff;
border-radius:12px;
padding:20px;
box-shadow:0 4px 15px rgba(0,0,0,.05)
}
.box h3{
font-size:1rem;
margin-bottom:15px;
border-left:4px solid var(--primary);
padding-left:10px
}

.btn{
width:100%;
padding:12px;
border-radius:8px;
border:none;
font-weight:600;
cursor:pointer;
display:flex;
align-items:center;
justify-content:center;
gap:8px;
transition:.3s
}
.btn-primary{background:var(--primary);color:#fff}
.btn-primary:hover{background:var(--secondary)}
.btn-primary:disabled{background:#ccc;cursor:not-allowed}
.btn-outline{
background:none;
border:1px solid var(--primary);
color:var(--primary);
margin-top:10px
}

.colors{
display:grid;
grid-template-columns:repeat(5,1fr);
gap:10px
}
.color{
width:34px;
height:34px;
border-radius:50%;
cursor:pointer;
border:2px solid #fff;
box-shadow:0 0 5px rgba(0,0,0,.15)
}

.loader{
display:none;
position:absolute;
inset:0;
background:rgba(255,255,255,.9);
z-index:10;
flex-direction:column;
align-items:center;
justify-content:center;
border-radius:14px
}
.spin{
width:48px;
height:48px;
border:5px solid #eee;
border-top:5px solid var(--primary);
border-radius:50%;
animation:spin 1s linear infinite
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>

<nav>
<div class="logo"><i class="fa-solid fa-scissors"></i> Multi Tool Hub</div>
</nav>

<div class="main">
<div class="layout">

<div class="card">
<div class="loader" id="loader">
<div class="spin"></div>
<p style="margin-top:12px;font-weight:600">AI Processingâ€¦</p>
<small style="color:var(--muted)">First load may take a few seconds</small>
</div>

<div class="drop" id="drop">
<i class="fa-solid fa-cloud-arrow-up" style="font-size:3rem;color:var(--primary)"></i>
<h2>Upload Image</h2>
<p>Click or drag & drop image</p>
<input type="file" id="file" hidden accept="image/*">
</div>

<div class="preview" id="preview">
<div>
<p><b>Original</b></p>
<img id="original">
</div>
<div>
<p><b>Background Removed</b></p>
<canvas id="canvas"></canvas>
</div>
</div>
</div>

<div class="sidebar">
<div class="box">
<h3>Actions</h3>
<button class="btn btn-primary" id="download" disabled>
<i class="fa-solid fa-download"></i> Download PNG
</button>
<button class="btn btn-outline" onclick="location.reload()">
<i class="fa-solid fa-rotate"></i> Reset
</button>
</div>

<div class="box">
<h3>Background Color</h3>
<div class="colors">
<div class="color" style="background:transparent;border:1px solid #ccc" onclick="setBg('transparent')"></div>
<div class="color" style="background:#fff" onclick="setBg('#fff')"></div>
<div class="color" style="background:#000" onclick="setBg('#000')"></div>
<div class="color" style="background:#ff4757" onclick="setBg('#ff4757')"></div>
<div class="color" style="background:#1e90ff" onclick="setBg('#1e90ff')"></div>
<div class="color" style="background:#2ed573" onclick="setBg('#2ed573')"></div>
<div class="color" style="background:#ffa502" onclick="setBg('#ffa502')"></div>
<div class="color" style="background:#a29bfe" onclick="setBg('#a29bfe')"></div>
<div class="color" style="background:#dfe6e9" onclick="setBg('#dfe6e9')"></div>
</div>
</div>
</div>

</div>
</div>

<script type="module">
import removeBg from "https://cdn.jsdelivr.net/npm/@imgly/background-removal@1.4.5/+esm";

const fileInput=document.getElementById("file");
const drop=document.getElementById("drop");
const preview=document.getElementById("preview");
const original=document.getElementById("original");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const loader=document.getElementById("loader");
const download=document.getElementById("download");

let resultBlob=null;
let bg="transparent";

drop.onclick=()=>fileInput.click();

drop.ondragover=e=>{e.preventDefault();drop.classList.add("drag")};
drop.ondragleave=()=>drop.classList.remove("drag");
drop.ondrop=e=>{
e.preventDefault();
drop.classList.remove("drag");
handleFile(e.dataTransfer.files[0]);
};

fileInput.onchange=e=>handleFile(e.target.files[0]);

async function handleFile(file){
if(!file || !file.type.startsWith("image/")) return;

drop.style.display="none";
preview.style.display="grid";
loader.style.display="flex";

original.src=URL.createObjectURL(file);

try{
resultBlob=await removeBg(file,{
publicPath:"https://cdn.jsdelivr.net/npm/@imgly/background-removal@1.4.5/dist/"
});
draw();
download.disabled=false;
}catch(e){
alert("AI failed. Use HTTPS or localhost.");
location.reload();
}
loader.style.display="none";
}

function draw(){
const img=new Image();
img.onload=()=>{
canvas.width=img.width;
canvas.height=img.height;
ctx.clearRect(0,0,canvas.width,canvas.height);
if(bg!=="transparent"){
ctx.fillStyle=bg;
ctx.fillRect(0,0,canvas.width,canvas.height);
}
ctx.drawImage(img,0,0);
};
img.src=URL.createObjectURL(resultBlob);
}

window.setBg=color=>{bg=color; if(resultBlob) draw();}

download.onclick=()=>{
const a=document.createElement("a");
a.download="background-removed.png";
a.href=canvas.toDataURL("image/png");
a.click();
};
</script>

</body>
</html>
